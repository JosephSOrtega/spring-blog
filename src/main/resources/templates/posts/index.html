<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head>
    <meta charset="UTF-8"/>
    <title>Home</title>
    <th:block th:include="/partials/header"/>
</head>
<body>
<th:block th:include="/partials/navbar"/>

<ul>
    <li th:each="post : ${posts}">
        <h2 th:text="${post.title}"></h2>
        <p th:text="${post.body}"></p>
        <input type="hidden" name="id" sec:authorize="isAuthenticated()" th:value="${post.id}"/>
        <form action="/posts/editing" method="get">
            <p><input type="submit" value="Edit" /></p>
            <input type="hidden" name="id" th:value="${post.id}"/>
        </form>
        <form action="/posts/delete" sec:authorize="isAuthenticated()" method="post">
            <p><input type="submit" value="Delete" /></p>
            <input type="hidden" name="id" th:value="${post.id}"/>
            <input type="hidden" th:name="${_csrf.parameterName}"   th:value="${_csrf.token}"/>
        </form>
        <form th:action="'/posts/' + ${post.id}" method="get">
            <p><input type="submit" value="Show Ad" /></p>
        </form>
    </li>
</ul>

<th:block th:include="/partials/footer"/>
</body>
</html>
